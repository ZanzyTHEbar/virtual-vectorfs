version: "2"
sql:
  - schema: "vvfs/memory/migrations"
    queries: "vvfs/memory/queries"
    engine: "sqlite"
    gen:
      go:
        package: "database"
        out: "vvfs/memory/database"
        sql_package: "database/sql"
        # Advanced sqlc features
        emit_prepared_queries: true
        omit_unused_structs: true
        emit_json_tags: true
        emit_interface: true
        emit_exact_table_names: false
        emit_empty_slices: true
        # Standard type mappings - Custom domain types can be handled manually in generated code
        overrides:
          - db_type: "BOOLEAN"
            go_type: "bool"
          - db_type: "DATETIME"
            go_type: "time.Time"
          - db_type: "TIMESTAMP"
            go_type: "time.Time"
          - db_type: "timestamptz"
            go_type: "time.Time"
          - db_type: "JSON"
            go_type: "json.RawMessage"
          - db_type: "JSONB"
            go_type: "json.RawMessage"
          - db_type: "UUID"
            go_type: "string"

          - db_type: "TEXT"
            go_type: "string"
            nullable: true
          - db_type: "INTEGER"
            go_type: "int64"
            nullable: true
          - db_type: "REAL"
            go_type: "float64"
            nullable: true
        # Rename settings for better naming
        rename:
          # Rename query result types for clarity
          GetWorkspaceSummary: "WorkspaceWithStats"
          GetFileSummary: "FileWithMetadata"
          GetEntitySummary: "EntityWithObservations"
          GetSearchResults: "SearchResultItem"
          GetAnalyticsData: "AnalyticsRecord"
          # Rename parameter types
          GetWorkspaceSummaryParams: "WorkspaceQuery"
          GetFileSummaryParams: "FileQuery"
          GetEntitySummaryParams: "EntityQuery"
          GetSearchResultsParams: "SearchQuery"
          GetAnalyticsDataParams: "AnalyticsQuery"
          # Standard renames
          workspace: "Workspace"
          file: "File"
          entity: "Entity"
          relation: "Relation"
          snapshot: "Snapshot"
          operation_history: "OperationHistory"
          entity_file_relation: "EntityFileRelation"
